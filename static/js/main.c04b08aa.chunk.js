(this["webpackJsonpstar-db"]=this["webpackJsonpstar-db"]||[]).push([[0],{22:function(e,t,a){},26:function(e,t,a){e.exports=a(44)},31:function(e,t,a){},32:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),l=a.n(c),i=a(2),o=a(3),s=a(7),u=a(6),m=(a(31),function(e){var t=e.err;return r.a.createElement("div",{className:"error-indicator"},r.a.createElement("h3",null,"BOOM!"),r.a.createElement("p",null,"somethimg has gone terribly wrong"),r.a.createElement("p",null,"Error: ",t))}),p=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1},e}return Object(o.a)(a,[{key:"componentDidCath",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement(m,null):this.props.children}}]),a}(n.Component),g=a(15),h=(a(32),a(4)),d=function(e){var t=Object(n.useState)(0),a=Object(g.a)(t,2),c=a[0],l=a[1],i=Object(n.useRef)(null),o=function(){var e=document.getElementsByClassName("collapse");l(i.current.scrollHeight),e[0].style.setProperty("--calc-height",i.current.scrollHeight+"px")};Object(n.useEffect)((function(){i.current.scrollHeight&&o()})),Object(n.useLayoutEffect)((function(){if(window){var e=function(){i.current.scrollHeight!==c&&o()};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}}),[]);return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark rounded d-flex"},r.a.createElement("h1",{className:"header-title"},r.a.createElement(h.b,{to:"/"},"Star DB")),r.a.createElement("button",{className:"navbar-toggler collapsed",type:"button","data-toggle":"collapse","data-target":"#navbarColor03","aria-controls":"navbarColor03","aria-expanded":"false","aria-label":"Toggle navigation",onClick:function(){document.getElementsByClassName("collapse")[0].classList.toggle("show")}},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarColor03"},r.a.createElement("ul",{ref:i,className:"header-navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(h.b,{className:"nav-link",to:"/people/"},"People")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(h.b,{className:"nav-link",to:"/planets/"},"Planets")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(h.b,{className:"nav-link",to:"/starships/"},"Starships")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(h.b,{className:"nav-link",to:"/login/"},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(h.b,{className:"nav-link",to:"/secret/"},"Secret")))))},f=a(5),v=a.n(f),E=a(12),b=function(){function e(){var t=this;Object(i.a)(this,e),this.getAllPeople=Object(E.a)(v.a.mark((function e(){var a,n,r=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>0&&void 0!==r[0]?r[0]:1,e.next=3,t.getData("/people/?page=".concat(a));case 3:return n=e.sent,e.abrupt("return",{count:n.count,desc:n.results.map(t._transformPerson)});case 5:case"end":return e.stop()}}),e)}))),this.getPerson=function(){var e=Object(E.a)(v.a.mark((function e(a){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getData("/people/".concat(a,"/"));case 2:return n=e.sent,e.abrupt("return",t._transformPerson(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getImagePerson=function(e){return"".concat(t._imageBase,"/characters/").concat(e,".jpg")},this.getAllPlanets=Object(E.a)(v.a.mark((function e(){var a,n,r=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>0&&void 0!==r[0]?r[0]:1,e.next=3,t.getData("/planets/?page=".concat(a));case 3:return n=e.sent,e.abrupt("return",{count:n.count,desc:n.results.map(t._transformPlanet)});case 5:case"end":return e.stop()}}),e)}))),this.getPlanet=function(){var e=Object(E.a)(v.a.mark((function e(a){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getData("/planets/".concat(a,"/"));case 2:return n=e.sent,e.abrupt("return",t._transformPlanet(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getImagePlanet=function(e){return"".concat(t._imageBase,"/planets/").concat(e,".jpg")},this.getAllStarships=Object(E.a)(v.a.mark((function e(){var a,n,r=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>0&&void 0!==r[0]?r[0]:1,e.next=3,t.getData("/starships/?page=".concat(a));case 3:return n=e.sent,e.abrupt("return",{count:n.count,desc:n.results.map(t._transformStarship)});case 5:case"end":return e.stop()}}),e)}))),this.getStarship=function(){var e=Object(E.a)(v.a.mark((function e(a){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getData("/starships/".concat(a,"/"));case 2:return n=e.sent,e.abrupt("return",t._transformStarship(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getImageStarship=function(e){return"".concat(t._imageBase,"/starships/").concat(e,".jpg")},this._transformPlanet=function(e){return{id:t._extractId(e),name:e.name,population:e.population,rotationPeriod:e.rotation_period,diameter:e.diameter,climate:e.climate}},this._transformStarship=function(e){return{id:t._extractId(e),name:e.name,model:e.model,manufacturer:e.manufacturer,costInCredits:e.costInCredits,length:e.length,crew:e.crew,passengers:e.passengers,cargoCapacity:e.cargoCapacity}},this._transformPerson=function(e){return{id:t._extractId(e),name:e.name,gender:e.gender,birthYear:e.birth_year,eyeColor:e.eye_color}},this._apiBase="https://swapi.dev/api",this._imageBase="https://starwars-visualguide.com/assets/img"}return Object(o.a)(e,[{key:"getData",value:function(){var e=Object(E.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._apiBase).concat(t));case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Could not fetch: ".concat(this._apiBase).concat(t,", received: ").concat(a.status));case 5:return e.abrupt("return",a.json());case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_extractId",value:function(e){return e.url.match(/\/([0-9]*)\/$/)[1]}}]),e}(),P=(a(38),function(e){e.className;return r.a.createElement("div",{className:"lds-css ng-scope"},r.a.createElement("div",{className:"lds-double-ring"},r.a.createElement("div",null),r.a.createElement("div",null)))}),y=(a(39),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).swapiService=new b,e.state={planet:{},loading:!0,isError:!1,errMessage:""},e.onPlanetLoaded=function(t){e.setState({planet:t,loading:!1})},e.onErrorLoading=function(t){e.setState({loading:!1,isError:!0,errMessage:t.message})},e.updateView=function(){var t=Math.floor(18*Math.random())+2;e.swapiService.getPlanet(t).then(e.onPlanetLoaded).catch(e.onErrorLoading)},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.interval;this.updateView(),this.interval=setInterval(this.updateView,e)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.state,t=e.planet,a=e.loading,n=e.errMessage,c=e.isError,l=c?r.a.createElement(m,{err:n}):null,i=a?r.a.createElement(P,null):null,o=a||c?null:r.a.createElement(w,{planet:t});return r.a.createElement("div",{className:"d-flex flex-wrap bg-light mt-3 mb-5 p-3 rounded random-planet"},i,o,l)}}]),a}(n.Component));y.defaultProps={interval:6e4};var w=function(e){var t=e.planet,a=t.id,n=t.name,c=t.population,l=t.rotationPeriod,i=t.diameter;return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"random-planet-image img-thumbnail rounded",src:"https://starwars-visualguide.com/assets/img/planets/".concat(a,".jpg"),alt:""}),r.a.createElement("div",{className:"random-planet-property m-3 ml-sm-5"},r.a.createElement("h3",null," ",n),r.a.createElement("ul",{className:"list-group list-group-flush"},r.a.createElement("li",{className:"list-group-item"},"Population ",c),r.a.createElement("li",{className:"list-group-item"},"Rotation period  ",l),r.a.createElement("li",{className:"list-group-item"},"Diameter ",i))))},j=y,O=r.a.createContext(),N=O.Provider,k=O.Consumer,I=(a(40),function(e){var t=e.leftContent,a=e.rightContent;return r.a.createElement("div",{className:"row flex-wrap-reverse"},r.a.createElement(p,null,r.a.createElement("div",{className:"col-lg-6 mb-3"},t)),r.a.createElement(p,null,r.a.createElement("div",{className:"col-lg-6 detail-box"},a)))}),D=a(11),S=(a(22),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={isError:!1},e.fallback=function(){e.setState({isError:!0})},e.loadImage=function(){e.setState({isError:!1})},e}return Object(o.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.image!==e.image&&this.loadImage()}},{key:"render",value:function(){return this.state.isError?r.a.createElement("div",{className:"item-detail-image item-detail-error-img rounded"}," ","Sorry, \n no foto \n in the database"):r.a.createElement("img",{className:"item-detail-image rounded",src:this.props.image,onError:this.fallback,alt:""})}}]),a}(n.Component)),x=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={item:null,image:null,error:!1},e}return Object(o.a)(a,[{key:"updateItem",value:function(){var e=this,t=this.props,a=t.itemId,n=t.getData,r=t.getImageUrl;this.setState({error:!1}),a&&n(a).then((function(t){e.setState({item:t,loading:!1,image:r(a)})})).catch((function(){e.setState({error:!0})}))}},{key:"componentDidMount",value:function(){this.updateItem()}},{key:"componentDidUpdate",value:function(e){this.props.itemId!=e.itemId&&this.updateItem()}},{key:"render",value:function(){var e=this.state,t=e.item,a=e.image;e.loading;if(e.error)return r.a.createElement(m,null);if(!t)return r.a.createElement(P,null);var n=t.name;return r.a.createElement("div",{className:"d-flex flex-wrap bg-light p-3 rounded"},r.a.createElement(S,{image:a}),r.a.createElement("div",{className:"item-detail-property m-3"},r.a.createElement("h3",{className:"item-detail-name"},n),r.a.createElement("ul",{className:"list-group list-group-flush"},r.a.Children.map(this.props.children,(function(e){return r.a.cloneElement(e,{item:t})})))))}}]),a}(n.Component),C=function(e){var t=e.item,a=e.field,n=e.label;return r.a.createElement("li",{className:"list-group-item"},n," ",t[a])},_=function(e){return function(t){Object(s.a)(n,t);var a=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var t=arguments.length,r=new Array(t),c=0;c<t;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).state={data:null,loading:!0,error:!1},e}return Object(o.a)(n,[{key:"update",value:function(){var e=this;this.setState({laoding:!0,error:!1}),this.props.numPage&&this.props.getData(this.props.numPage).then((function(t){e.setState({data:t,loading:!1})})).catch((function(){e.setState({loading:!1,error:!0})}))}},{key:"componentDidUpdate",value:function(e){this.props.numPage!=e.numPage&&this.update()}},{key:"componentDidMount",value:function(){this.update()}},{key:"render",value:function(){var t=this.state,a=t.data,n=t.loading,c=t.error;return n?r.a.createElement(P,null):c?r.a.createElement(m,null):r.a.createElement(e,Object.assign({},this.props,{data:a}))}}]),n}(n.Component)},L=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}},A=function(e){return function(t){return function(a){return r.a.createElement(t,a,e)}}},B=function(e){return function(t){return function(a){return r.a.createElement(k,null,(function(n){var c=e(n);return r.a.createElement(t,Object.assign({},a,c))}))}}},M=B((function(e){return{getData:e.getPerson,getImageUrl:e.getImagePerson}}))((function(e){return r.a.createElement(x,e,r.a.createElement(C,{label:"Gender",field:"gender"}),r.a.createElement(C,{label:"Years",field:"birthYear"}),r.a.createElement(C,{label:"Eye color",field:"eyeColor"}))})),U=B((function(e){return{getData:e.getPlanet,getImageUrl:e.getImagePlanet}}))((function(e){return r.a.createElement(x,e,r.a.createElement(C,{label:"Diameter:",field:"diameter"}),r.a.createElement(C,{label:"Population:",field:"population"}),r.a.createElement(C,{label:"Climate:",field:"climate"}))})),T=B((function(e){return{getData:e.getStarship,getImageUrl:e.getImageStarship}}))((function(e){return r.a.createElement(x,e,r.a.createElement(C,{label:"Crew",field:"crew"}),r.a.createElement(C,{label:"Passengers",field:"passengers"}))})),H=(a(41),function(e){var t=e.pageCount,a=e.path;return r.a.createElement("div",null,r.a.createElement("p",{className:"title"},"Page:"),r.a.createElement("ul",{className:"pages-navbar-nav"},function(e){for(var t=[],n=1;n<=e;n++)t.push(r.a.createElement("li",{key:n,className:"nav-item"},r.a.createElement(h.b,{className:"nav-link",to:"/".concat(a,"/page_").concat(n,"/")},n)));return t}(t)))}),Y=(a(42),function(e){var t=e.data,a=t.desc,c=t.count,l=e.changePage,i=e.id,o=e.showDetail,s=e.path,u=Object(n.useState)(0),m=Object(g.a)(u,2),p=m[0],h=m[1];Object(n.useEffect)((function(){var e=c/10;c%10&&++e,h(e)}),[c]),Object(n.useEffect)((function(){o(a[0].id)}),[a]);return r.a.createElement("div",null,r.a.createElement("ul",{className:"list-item list-group list-group-item-action"},function(t,a){return t.map((function(t){var n=t.id,c=e.children(t),l=a==n;return r.a.createElement("li",{key:n,className:"item-list list-group-item list-group-item-action"+(l?" active":""),onClick:function(){return o(n)}},c)}))}(a,i)),r.a.createElement(H,{pageCount:p,path:s,changePage:l}))});Y.defaultProps={showDetail:function(){},desc:[{}]};var R=Y,V=function(e){return e.name},W=L(B((function(e){return{getData:e.getAllPeople}})),_,A(V))(R),z=L(B((function(e){return{getData:e.getAllPlanets}})),_,A(V))(R),J=L(B((function(e){return{getData:e.getAllStarships}})),_,A(V))(R),F=function(e){return function(t){Object(s.a)(n,t);var a=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var t=arguments.length,r=new Array(t),c=0;c<t;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).state={numPage:null,detailId:null},e.path=e.props.match.path?e.props.match.path.split("/")[1]:"",e.changePageTo=function(t){return function(){e.props.history.push("/".concat(e.path,"/page_").concat(t,"/")),e.setState({numPage:t})}},e.changeDetail=function(t){e.props.history.push("/".concat(e.path,"/").concat(e.props.match.params.page,"/").concat(t)),e.setState({detailId:t})},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.match.params.page?this.setState({numPage:this.props.match.params.page.split("page_")[1],detailId:this.props.match.params.id}):this.props.history.push("page_1/1")}},{key:"componentDidUpdate",value:function(e){this.props.match.params.page!=e.match.params.page&&this.setState({numPage:this.props.match.params.page.split("page_")[1]}),this.props.match.params.id!=e.match.params.id&&this.setState({detailId:this.props.match.params.id})}},{key:"render",value:function(){return r.a.createElement(e,{changeDetail:this.changeDetail,numPage:this.state.numPage,id:this.props.match.params.id,path:this.path,changePageTo:this.changePageTo,detailId:this.state.detailId})}}]),n}(n.Component)},G=Object(D.g)(F((function(e){var t=e.changeDetail,a=e.numPage,n=e.id,c=e.path,l=e.changePageTo,i=e.detailId;return r.a.createElement("div",null,r.a.createElement(I,{leftContent:r.a.createElement(W,{showDetail:t,numPage:a,id:n,path:c,changePage:l}),rightContent:r.a.createElement(M,{itemId:i})}))}))),$=Object(D.g)(F((function(e){var t=e.changeDetail,a=e.numPage,n=e.id,c=e.path,l=e.changePageTo,i=e.detailId;return r.a.createElement("div",null,r.a.createElement(I,{leftContent:r.a.createElement(z,{showDetail:t,numPage:a,id:n,path:c,changePage:l}),rightContent:r.a.createElement(U,{itemId:i})}))}))),q=Object(D.g)(F((function(e){var t=e.changeDetail,a=e.numPage,n=e.id,c=e.path,l=e.changePageTo,i=e.detailId;return r.a.createElement("div",null,r.a.createElement(I,{leftContent:r.a.createElement(J,{showDetail:t,numPage:a,id:n,path:c,changePage:l}),rightContent:r.a.createElement(T,{itemId:i})}))}))),K=function(e){return e.isLoggedIn?r.a.createElement("div",{className:"jumbotron text-center"},r.a.createElement("h3",null,"Welcome to Secret Page!!!")):r.a.createElement("div",null,r.a.createElement("h3",{className:"text-center"},r.a.createElement("p",null,"Page in developing")),r.a.createElement("h4",{className:"text-center text-monospace text-danger"},"You should not see this!!!"))},Q=function(e){var t=e.isLoggedIn;e.onLogin;return t?r.a.createElement(D.a,{to:""}):r.a.createElement("div",{className:"jumbotron text-center"},r.a.createElement("h3",null,"Page in developing"),r.a.createElement("p",null,"Login to secret page"),r.a.createElement("button",{className:"btn btn-success"},"Login"))},X=(a(43),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).swapiService=new b,e.state={isLoggedIn:!1},e.onLogin=function(){e.setState({isLoggedIn:!0})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.state.isLoggedIn;return r.a.createElement(p,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,{value:this.swapiService},r.a.createElement(h.a,null,r.a.createElement("div",{className:"app container"},r.a.createElement(d,null),r.a.createElement(j,null),r.a.createElement(D.d,null,r.a.createElement(D.b,{path:"/",render:function(){return r.a.createElement("h2",null,"Welcome to StarDb")},exact:!0}),r.a.createElement(D.b,{path:"/people/:page?/:id?/",component:G}),r.a.createElement(D.b,{path:"/planets/:page?/:id?/",component:$}),r.a.createElement(D.b,{path:"/starships/:page?/:id?/",component:q}),r.a.createElement(D.b,{path:"/login",render:function(){return r.a.createElement(Q,{isLoggedIn:t,onLogin:e.onLogin})}}),r.a.createElement(D.b,{path:"/secret",render:function(){return r.a.createElement(K,{isLoggedIn:t})}}),r.a.createElement(D.a,{to:"/"}),r.a.createElement(D.b,{render:function(){return r.a.createElement("h1",null,"Page not found")}})))))))}}]),a}(n.Component));l.a.render(r.a.createElement(X,null),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.c04b08aa.chunk.js.map